{"version":3,"sources":["webpack:///./src/js/angular/ontorefine/app.js"],"names":["angular","module","controller","$scope","$routeParams","$window","$location","$timeout","refineDisabled","window","addEventListener","isProjectPristine","isPristine","e","data","project","page","clickFunction","event","preventDefault","that","this","path","href","replace","loadFunction","iframeElement","document","getElementsByTagName","contentWindow","head","innerHTML","indexOf","body","$apply","aS","i","length","target","onclick","location","pathname","$","css","style","height","$on","confirm","removeEventListener"],"mappings":"2FAAA,+BAKmBA,QAAQC,OAAO,+BAAgC,CAAC,sCAExDC,WAAW,iBAAkB,CAAC,SAAU,eAAgB,UAAW,YAAa,WAAY,SAAUC,EAAQC,EAAcC,EAASC,EAAWC,GACvJJ,EAAOK,gBAAiB,EACxBC,OAAOC,iBAAiB,UAAWC,GACnC,IAAIC,GAAa,EA2CjB,SAASD,EAAkBE,GACvBD,EAAwB,aAAXC,EAAEC,KA3CfV,EAAaW,QACbZ,EAAOa,KAAO,2BAA6BZ,EAAaW,QACjDX,EAAaY,KACpBb,EAAOa,KAAO,WAAaZ,EAAaY,KAGxCb,EAAOa,KAAO,WAGlBP,OAAOQ,cAAgB,SAAUC,GAC7BA,EAAMC,iBACN,MAAMC,EAAOC,KAKb,OAJAd,GAAS,WACL,MAAMe,EAAOF,EAAKG,KAAKC,QAAQ,YAAa,cAC5ClB,EAAUgB,KAAKA,OAEZ,GAGXb,OAAOgB,aAAe,WAClB,MAAMC,EAAgBjB,OAAOkB,SAASC,qBAAqB,UAAU,GACrE,GAAIF,EAAcG,cAAcF,SAASG,KAAKC,UAAUC,QAAQ,0BAA4B,GACxFN,EAAcG,cAAcF,SAASM,KAAKF,UAAUC,QAAQ,0BAA4B,EAGxF,OAFA7B,EAAOK,gBAAiB,OACxBL,EAAO+B,SAGX,MAAMC,EAAKT,EAAcG,cAAcF,SAASC,qBAAqB,KACrE,IAAK,IAAIQ,EAAI,EAAGA,EAAID,EAAGE,OAAQD,IACN,YAAjBD,EAAGC,GAAGE,SACNH,EAAGC,GAAGG,QAAU9B,OAAOQ,eAG3BS,EAAcG,cAAcW,SAASC,SAAST,QAAQ,aAAe,GACrEU,EAAE,MAAMC,IAAI,WAAY,YACxBjB,EAAckB,MAAMC,OAAS,uBAE7BH,EAAE,MAAMC,IAAI,WAAY,IACxBjB,EAAckB,MAAMC,OAAS,uBAQrC1C,EAAO2C,IAAI,uBAAyB5B,IAC3BN,GACImC,QAAQ,+DACT7B,EAAMC,mBAKlBhB,EAAO2C,IAAI,YAAY,WACnBrC,OAAOuC,oBAAoB,UAAWrC","file":"71.3449e2f8f9f313ff8bdb.bundle.js","sourcesContent":["import 'angular/core/services';\nimport 'angular/core/directives';\nimport 'lib/yasqe.bundled';\nimport 'lib/yasr.bundled';\n\nconst ontorefine = angular.module('graphdb.framework.ontorefine', ['graphdb.framework.core.directives']);\n\nontorefine.controller('OntoRefineCtrl', ['$scope', '$routeParams', '$window', '$location', '$timeout', function ($scope, $routeParams, $window, $location, $timeout) {\n    $scope.refineDisabled = false;\n    window.addEventListener(\"message\", isProjectPristine);\n    var isPristine = true;\n    if ($routeParams.project) {\n        $scope.page = 'orefine/project?project=' + $routeParams.project;\n    } else if ($routeParams.page) {\n        $scope.page = 'orefine/' + $routeParams.page;\n    } else {\n\n        $scope.page = 'orefine/';\n    }\n\n    window.clickFunction = function (event) {\n        event.preventDefault();\n        const that = this;\n        $timeout(function () {\n            const path = that.href.replace(/.+orefine/, 'ontorefine');\n            $location.path(path);\n        });\n        return false;\n    };\n\n    window.loadFunction = function () {\n        const iframeElement = window.document.getElementsByTagName('iframe')[0];\n        if (iframeElement.contentWindow.document.head.innerHTML.indexOf('OntoRefine is disabled') > 0 ||\n            iframeElement.contentWindow.document.body.innerHTML.indexOf('OntoRefine is disabled') > 0) {\n            $scope.refineDisabled = true;\n            $scope.$apply();\n            return;\n        }\n        const aS = iframeElement.contentWindow.document.getElementsByTagName('a');\n        for (let i = 0; i < aS.length; i++) {\n            if (aS[i].target === '_parent') {\n                aS[i].onclick = window.clickFunction;\n            }\n        }\n        if (iframeElement.contentWindow.location.pathname.indexOf('/project') > -1) {\n            $('h1').css('position', 'absolute');\n            iframeElement.style.height = 'calc(100vh - 45px)';\n        } else {\n            $('h1').css('position', '');\n            iframeElement.style.height = 'calc(100vh - 75px)';\n        }\n    };\n\n    function isProjectPristine(e) {\n        isPristine = e.data === 'pristine';\n    }\n\n    $scope.$on('$locationChangeStart', (event) => {\n        if (!isPristine) {\n            if (!confirm(\"There are unsaved changes! Are you sure, you want to exit?\")) {\n                event.preventDefault();\n            }\n        }\n    });\n\n    $scope.$on(\"$destroy\", function () {\n        window.removeEventListener('message', isProjectPristine);\n    });\n}]);\n"],"sourceRoot":""}