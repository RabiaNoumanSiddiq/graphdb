{"version":3,"sources":["webpack:///./src/js/angular/stats/app.js"],"names":["angular","module","controller","$scope","$http","toastr","$timeout","$jwtAuth","get","success","data","info","error","msg","getError","getReportStatus","statusElements","split","status","timestamp","errorMessage","getReport","url","isAuthenticated","encodeURIComponent","getAuthToken","window","open","makeReport","post"],"mappings":"4FAAA,YAEqBA,QAAQC,OAAO,0BAA2B,CAAC,WAEnDC,WAAW,gBAAiB,CAAC,SAAU,QAAS,SAAU,WAAY,WAC/E,SAAUC,EAAQC,EAAOC,EAAQC,EAAUC,GAEvCH,EAAMI,IAAI,kBACLC,SAAQ,SAAUC,GACfP,EAAOQ,KAAOD,KAEjBE,OAAM,SAAUF,GACb,MAAMG,EAAMC,SAASJ,GACrBL,EAAOO,MAAMC,EAAK,YAK1BV,EAAOY,gBAAkB,WACrBX,EAAMI,IAAI,sBACLC,SAAQ,SAAUC,GACf,MAAMM,EAAiBN,EAAKO,MAAM,IAAK,GACvCd,EAAOe,OAASF,EAAe,GAC/Bb,EAAOgB,UAAYH,EAAe,GAClCb,EAAOiB,aAAeJ,EAAe,GAEf,gBAAlBb,EAAOe,QACPZ,EAASH,EAAOY,gBAAiB,QAGxCH,OAAM,SAAUF,GACb,MAAMG,EAAMC,SAASJ,GACrBL,EAAOO,MAAMC,EAAK,aAI9BV,EAAOY,kBAEPZ,EAAOkB,UAAY,WACf,IAAIC,EAAM,cACNf,EAASgB,oBACTD,EAAMA,EAAM,cAAgBE,mBAAmBjB,EAASkB,iBAG5DC,OAAOC,KAAKL,IAGhBnB,EAAOyB,WAAa,WAChBxB,EAAMyB,KAAK,eACNpB,SAAQ,WACLN,EAAOe,OAAS,cAChBZ,EAASH,EAAOY,gBAAiB,QAEpCH,OAAM,SAAUF,GACb,MAAMG,EAAMC,SAASJ,GACrBL,EAAOO,MAAMC,EAAK","file":"100.6e6d69149935cd37d5a7.bundle.js","sourcesContent":["import 'angular/core/services';\n\nconst adminInfoApp = angular.module('graphdb.framework.stats', ['toastr']);\n\nadminInfoApp.controller('AdminInfoCtrl', ['$scope', '$http', 'toastr', '$timeout', '$jwtAuth',\n    function ($scope, $http, toastr, $timeout, $jwtAuth) {\n\n        $http.get('rest/info/data')\n            .success(function (data) {\n                $scope.info = data;\n            })\n            .error(function (data) {\n                const msg = getError(data);\n                toastr.error(msg, 'Error');\n            });\n\n\n        //NONE, IN_PROGRESS, READY\n        $scope.getReportStatus = function () {\n            $http.get('rest/report/status')\n                .success(function (data) {\n                    const statusElements = data.split('|', 3);\n                    $scope.status = statusElements[0];\n                    $scope.timestamp = statusElements[1];\n                    $scope.errorMessage = statusElements[2];\n\n                    if ($scope.status === 'IN_PROGRESS') {\n                        $timeout($scope.getReportStatus, 3000);\n                    }\n                })\n                .error(function (data) {\n                    const msg = getError(data);\n                    toastr.error(msg, 'Error');\n                });\n        };\n\n        $scope.getReportStatus();\n\n        $scope.getReport = function () {\n            let url = 'rest/report';\n            if ($jwtAuth.isAuthenticated()) {\n                url = url + '?authToken=' + encodeURIComponent($jwtAuth.getAuthToken());\n            }\n\n            window.open(url);\n        };\n\n        $scope.makeReport = function () {\n            $http.post('rest/report')\n                .success(function () {\n                    $scope.status = 'IN_PROGRESS';\n                    $timeout($scope.getReportStatus, 2000);\n                })\n                .error(function (data) {\n                    const msg = getError(data);\n                    toastr.error(msg, 'Error');\n                });\n        };\n    }]);\n"],"sourceRoot":""}